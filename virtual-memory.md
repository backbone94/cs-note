## 메모리
프로그램이 실행되면 프로그램은 메모리에 할당된다. 메모리는 주로 운영체제에 의해서 CPU와 상호작용을 수행하여 프로그램을 실행한다. 메모리의 구조는 크게 Code, Data, Heap, Stack 네 개의 영역으로 나눌 수 있다.

> Memory = Code + Data + Heap + Stack

### 1. Code
프로그램의 코드가 저장되는 영역이다. 이 영역은 일반적으로 읽기 전용이며, CPU가 이 코드를 읽으면서 명령어를 한 줄씩 해석하여 명령을 수행한다.

### 2. Data
프로그램의 전역 또는 static 변수가 저장되는 영역이다. 프로그램이 시작될 때 공간이 할당되고, 프로그램이 종료될 때까지 유지되는 특징이 있다.

### 3. Heap
프로그램이 실행 중에 동적으로 할당되는 영역이다. C언어에서의 동적 할당은 malloc() 함수가 주로 쓰인다. Data 영역과 마찬가지로, Heap 영역에 공간이 할당된 이후부터는 프로그램이 종료될 때까지 할당된 공간을 유지한다. 따라서 프로그래머가 할당한 메모리 공간은 프로그래머가 직접 메모리 해제(free())를 해야 하며, 그렇지 않은 경우에는 메모리 누수 문제 발생할 수 있다.

### 4. Stack
함수와 지역 변수가 할당되는 영역이다. 함수가 호출되면 Stack에 함수 프레임이 생성되고, 함수가 끝나면 Stack에서 프레임이 제거된다.

## 가상 메모리
물리 메모리의 용량이 부족한 경우를 위해 가상 메모리라는 방식이 도입되었다. 물리 메모리와 디스크 공간을 조합하여 실제 메모리보다 큰 주소 공간을 사용할 수 있도록 한다. 예를 들어 8GB의 메모리를 가진 시스템에서 가상 메모리 방식을 쓰면 16GB 이상의 메모리를 사용하고 있는 것처럼 동작한다. 운영체제가 가상 메모리의 가상 주소를 제공하고, 그 가상 주소를 물리 메모리의 물리 주소로 변환시키는 방식으로 구현된다.
가상 메모리와 물리 메모리는 운영체제에 의해서 메모리의 최소 단위인 페이지(메모리와 디스크 사이를 이동하는 데이터의 묶음 단위)로 나뉜 채로 관리된다. 페이지가 디스크에서 메모리로 이동하면 스왑 인(swap in), 메모리에서 디스크로 이동하면 스왑 아웃(swap out)이라고 한다.
가상 메모리의 장점은, 메모리를 확장하여 실제 물리 메모리보다 더 큰 프로그램을 실행할 수 있다는 점이다. 하지만 디스크의 데이터 접근 속도가 메모리에 비해 많이 느린 편이다 보니, 페이지의 스와핑이 자주 발생할 수록 프로그램의 성능이 떨어진다는 단점이 있다.

### 동작 방식
1. 프로그램 실행: 프로그램을 실행시키기 위해 운영체제는 가상 메모리에 프로그램의 코드, 데이터, 힙, 스택 영역을 할당한다. 이 때, 프로그램의 모든 부분이 메모리에 한 번에 로드되는 것이 아니라, 필요한 데이터만 가상 메모리에 로드함으로써 메모리의 효율성을 높인다.
2. 페이지 폴트(Page Fault): 프로그램 진행을 위해 필요한 부분이 가상 메모리에 올라오지 않은 상태일 때, 필요한 데이터를 페이지 단위로 디스크 공간에서 가상 메모리로 스왑 인 하고, 필요하지 않은 페이지는 디스크 공간으로 스왑 아웃 한다.
